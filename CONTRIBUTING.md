# Contributing

## Development

### Setup

See [README](README.md) for details about how to install with hatch virtualenv.

### Developing the ZIM UI in Vue.JS

When you want to alter something in the ZIM UI in Vue.JS, you need assets which are generated by the scraper (e.g. shared.json, ...).

To simplify this, it is possible to:

- run the scraper (with original code base or your modified one)
- extract assets from generated files and place them in a directory where ZIM UI will find them
- iterate on ZIM UI code

This needs to be done everytime you make significant changes to the scraper (Python code) that have impact on files used by the Vue.JS UI.

To achieve this, first build the Docker image based on current code base.

```
docker build -t local-maps .
```

TODO: fix text+command below

Scrape ... but you could use any other one of interest for your UI developments).

```
docker run --rm -it -v "$PWD/output":/output local-maps maps2zim --name maps-tests_en_all --title "Maps" --description "Tests maps" --file-name maps-tests_en_all --overwrite
```

Extract interesting ZIM content and move it to `public` folder.

```
rm -rf zimui/public/content
docker run -it --rm -v $(pwd)/output:/data ghcr.io/openzim/zim-tools:latest zimdump dump --dir=/data/maps-tests_en_all /data/maps-tests_en_all.zim
sudo chown -R $(id -u -n):$(id -g -n) output/maps-tests_en_all
mv output/maps-tests_en_all/content zimui/public
rm -rf output/maps-tests_en_all
```

Start ZIM UI locally.

```
cd zimui
yarn dev
```

Do not forget to cleanup `public/content` folder before building the docker image again, otherwise all assets will be pushed to the ZIM.

```
rm -rf zimui/public/content
```
